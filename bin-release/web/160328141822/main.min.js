var GameUtil;!function(t){var e=function(t){function e(){t.call(this),this.mStageW=egret.MainContext.instance.stage.stageWidth,this.mStageH=egret.MainContext.instance.stage.stageHeight,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.onAddToStage=function(t){this.init()},p.init=function(){},e}(egret.DisplayObjectContainer);t.BassPanel=e,egret.registerClass(e,"GameUtil.BassPanel");var i=function(){function e(){}var i=(__define,e);return p=i.prototype,e.init=function(t){this.MainStage=t},e.runscene=function(e,i,n){if(void 0===i&&(i=t.GameConfig.NullAction),void 0===n&&(n=800),null==this.curScene)return this.curScene=e,void this.MainStage.addChild(this.curScene);if(i==t.GameConfig.NullAction)return null!=this.curScene&&this.MainStage.removeChild(this.curScene),this.curScene=e,void this.MainStage.addChild(this.curScene);this.nextScene=e,this.MainStage.addChild(this.nextScene),i==t.GameConfig.TransAlpha&&(this.nextScene.alpha=0,egret.Tween.get(this.curScene).to({alpha:0},n),egret.Tween.get(this.nextScene).to({alpha:1},n)),i==t.GameConfig.CrossLeft&&(this.nextScene.x=-this.MainStage.stageWidth,egret.Tween.get(this.curScene).to({x:this.MainStage.stageWidth},n),egret.Tween.get(this.nextScene).to({x:0},n)),i==t.GameConfig.OpenDoor;var s=this;egret.setTimeout(function(){s.MainStage.removeChild(s.curScene),s.curScene=s.nextScene},this,n)},e.curScene=null,e.nextScene=null,e.MainStage=null,e}();t.GameScene=i,egret.registerClass(i,"GameUtil.GameScene")}(GameUtil||(GameUtil={}));var CardScene=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.init=function(){this.show()},p.show=function(){this.curpage=1;var t=GameUtil.createRect(0,0,this.mStageW,this.mStageH,1,3484191);this.addChild(t);var e=new GameUtil.MyBitmap(RES.getRes("ejbottom_jpg"),this.mStageW/2,this.mStageH);e.setanchorOff(.5,1),this.addChild(e),this.bigAdpl=new egret.DisplayObjectContainer,this.addChild(this.bigAdpl),this.smAdpl=new AdaptGamelayer,this.addChild(this.smAdpl),this.smAdpl.initlayer(this.mStageH),this.showAdpl(),this.smAdpl.adpat();for(var i=["uppagebtn_png","downpagebtn_png"],n=[this.uppage,this.downpage],s=0;2>s;s++){var a=new GameUtil.Menu(this,"btnframe_png","btnframe_png",n[s]);a.addButtonImg(i[s]),a.x=97+550*s,a.y=GameUtil.setscreenY(1272),this.addChild(a)}var a=new GameUtil.Menu(this,"returnbtn_png","returnbtn_png",this.returnhome);a.x=this.mStageW/2,a.y=GameUtil.setscreenY(1272),this.addChild(a)},p.showAdpl=function(){this.bigAdpl.removeChildren();var t=new GameUtil.Menu(this,"showall"+this.curpage+"_jpg","showall"+this.curpage+"_jpg",this.nulcall);t.x=this.mStageW/2,t.y=(this.mStageH-115)/2,this.bigAdpl.addChild(t)},p.uppage=function(){1==this.curpage?this.curpage=30:this.curpage--,this.showAdpl()},p.downpage=function(){30==this.curpage?this.curpage=1:this.curpage++,this.showAdpl()},p.showbigpic=function(t){this.addChild(this.bigAdpl);var e=GameUtil.createRect(0,0,this.mStageW,this.mStageH,1,4930627);this.bigAdpl.addChild(e),e.touchEnabled=!0;var i=new AdaptGamelayer;i.initlayer(this.mStageH),this.bigAdpl.addChild(i);var n=new GameUtil.Menu(this,"showall"+t+"jpg","showall"+t+"jpg",this.nulcall);n.x=this.mStageW/2,n.y=this.mStageH/2,i.putItme(n),i.adpat();var s=new GameUtil.Menu(this,"returnbtn_png","returnbtn_png",this.returnscene);s.x=380,s.y=GameUtil.setscreenY(1272),this.bigAdpl.addChild(s)},p.returnscene=function(){this.bigAdpl.removeChildren(),this.removeChild(this.bigAdpl)},p.nulcall=function(){},p.returnhome=function(){GameUtil.GameScene.runscene(new GameStartScene)},e}(GameUtil.BassPanel);egret.registerClass(CardScene,"CardScene");var GameScence=function(t){function e(){t.call(this),this.card=[]}__extends(e,t);var i=(__define,e);return p=i.prototype,p.init=function(){this.show()},p.show=function(){this.costime=0,this.recardcount=0,this.recardnum=0,this.recarding=!1,this.bpassgame=!1,this.gamestate=GameState.gaming,this.costime=0,this.discovercont=new egret.DisplayObjectContainer;var t=GameUtil.createRect(0,0,this.mStageW,this.mStageH,1,3484191);this.addChild(t);var e=new GameUtil.MyBitmap(RES.getRes("bottom_jpg"),375,this.mStageH);e.setanchorOff(.5,1),this.addChild(e),this.addChild(TimePanel._i()),TimePanel._i().reset();var i=new GameUtil.Menu(this,"btnframe_png","btnframe_png",this.pausegame);i.addButtonImg("pausebtn_png"),i.x=695,i.y=GameUtil.setscreenY(1268),this.addChild(i),this.addChild(AdaptGamelayer._i()),AdaptGamelayer._i().initlayer(this.mStageH-158),this.showAdapLayer()},p.showAdapLayer=function(){for(var t,e=0;12>e;e++)e%2==0&&(t=Math.floor(e/2)+6*(Math.floor(100*Math.random())%5)),console.log("cardid====",t),this.card[e]=new cardsprite(RES.getRes("cardback_png"),97+227*Math.floor(e%3),180+296*Math.floor(e/3),Math.floor(e/2),t),AdaptGamelayer._i().putItme(this.card[e]);AdaptGamelayer._i().adpat();for(var e=0;10>e;e++){var i=Math.floor(100*Math.random())%12,n=Math.floor(100*Math.random())%12,s=this.card[i].x,a=this.card[i].y;this.card[i].x=this.card[n].x,this.card[i].y=this.card[n].y,this.card[n].x=s,this.card[n].y=a}},p.pausegame=function(){this.gamestate=GameState.gamepause,this.addChild(this.discovercont),this.discovercont.touchEnabled=!0;var t=GameUtil.createRect(0,0,this.mStageW,this.mStageH,.6);this.discovercont.addChild(t);var e=new GameUtil.Menu(this,"continubtn_jpg","continubtn_jpg",this.continugame);e.x=this.mStageW/2,e.y=GameUtil.setscreenY(591),this.discovercont.addChild(e);var i=new GameUtil.Menu(this,"backhomebtn_jpg","backhomebtn_jpg",this.backhome);i.x=this.mStageW/2,i.y=e.y+183,this.discovercont.addChild(i)},p.continugame=function(){this.gamestate=GameState.gaming,this.discovercont.removeChildren(),this.removeChild(this.discovercont)},p.backhome=function(){egret.clearInterval(TimePanel._i().intervaltag),TimePanel._i().removeChildren(),AdaptGamelayer._i().removeChildren(),this.removeChildren(),GameUtil.GameScene.runscene(new GameStartScene)},p.setcurrecard=function(t){this.currecard=t},p.getcurrecard=function(){return this.currecard},p.setrecardnum=function(t){this.recardnum=t},p.getrecardnum=function(){return this.recardnum},p.setrecardcount=function(t){this.recardcount=t},p.getrecardcount=function(){return this.recardcount},p.successGame=function(){GameUtil.GameConfig._i().bfirstplay=!1,this.bpassgame=!0,this.addChild(this.discovercont),this.discovercont.touchEnabled=!0;var t=GameUtil.createRect(0,0,this.mStageW,this.mStageH,.6);this.discovercont.addChild(t);var e=new GameUtil.MyBitmap(RES.getRes("passtext_png"),this.mStageW/2,this.mStageH/2-310);this.discovercont.addChild(e);var i=new GameUtil.MyTextField(this.mStageW/2,this.mStageH/2-200,40);i.setText("您的成绩是"+Math.ceil(this.costime/1e3)+"秒"),i.textColor=16741700,this.discovercont.addChild(i);var n=new GameUtil.Menu(this,"playagainbtn_png","playagainbtn_png",this.playagain);n.x=this.mStageW/2,n.y=i.y+214,this.discovercont.addChild(n);var s=new GameUtil.Menu(this,"sharebtn_png","sharebtn_png",this.sharegmae);s.x=this.mStageW/2,s.y=n.y+204,this.discovercont.addChild(s)},p.playagain=function(){AdaptGamelayer._i().removeChildren(),TimePanel._i().removeChildren(),this.removeChildren(),GameUtil.GameScene.runscene(e._i())},p.sharegmae=function(){console.log("sharegame");var t=new egret.DisplayObjectContainer;this.addChild(t);var e=this,i=GameUtil.createRect(0,0,this.mStageW,this.mStageH,.6);t.addChild(i),i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.removeChild(t)},this);var n=new GameUtil.MyBitmap(RES.getRes("sharetip_png"),this.mStageW,0);n.setanchorOff(1,0),t.addChild(n),this.bpassgame?SharePage._i().setdesctext(Math.ceil(this.costime/1e3)+"秒我就通关成神，有本事让我看看你多厉害！"):SharePage._i().setdesctext("听说快速完成了这个游戏的都成神了！")},p.gameOver=function(){GameUtil.GameConfig._i().bfirstplay=!1,this.addChild(this.discovercont),this.discovercont.touchEnabled=!0;var t=GameUtil.createRect(0,0,this.mStageW,this.mStageH,.6);this.discovercont.addChild(t);var e=new GameUtil.MyTextField(this.mStageW/2,this.mStageH/2-250,50);e.$setWidth(422),e.textColor=16741700,e.setText("还差一点就通关了再接再励哦!!!"),e.textAlign=egret.HorizontalAlign.CENTER,this.discovercont.addChild(e);var i=new GameUtil.Menu(this,"playagainbtn_png","playagainbtn_png",this.playagain);i.x=this.mStageW/2,i.y=e.y+214,this.discovercont.addChild(i);var n=new GameUtil.Menu(this,"sharebtn_png","sharebtn_png",this.sharegmae);n.x=this.mStageW/2,n.y=i.y+204,this.discovercont.addChild(n)},e._i=function(){return null==this.ints&&(this.ints=new e),this.ints},e.TotalCard=6,e}(GameUtil.BassPanel);egret.registerClass(GameScence,"GameScence");var GameStartScene=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.init=function(){this.show()},p.show=function(){var t=new GameUtil.MyBitmap(RES.getRes("gamebg_png"),0,0);t.setanchorOff(0,0),this.addChild(t);var e=new GameUtil.Menu(this,"startgamebtn_png","startgamebtn_png",this.startgame);e.setScaleMode(),e.x=this.mStageW/2,e.y=GameUtil.setscreenY(906),this.addChild(e);var i;GameUtil.GameConfig._i().bfirstplay?i=new GameUtil.Menu(this,"enjoymodebtnb_png","enjoymodebtnb_png",this.callnull):(i=new GameUtil.Menu(this,"enjoymodebtn_png","enjoymodebtn_png",this.enjoymode),i.setScaleMode()),i.x=this.mStageW/2,i.y=e.y+208,this.addChild(i);var n=new GameUtil.MyTextField(this.mStageW/2,GameUtil.setscreenY(1304),15);n.setText("盛讯游戏出品"),n.fontFamily="微软雅黑",n.textColor=9083277,n.touchEnabled=!0,this.addChild(n),this.addChild(SharePage._i()),SharePage._i().getSignPackage()},p.startgame=function(){GameUtil.GameScene.runscene(GameScence._i())},p.enjoymode=function(){GameUtil.GameScene.runscene(new CardScene)},p.callnull=function(){},e}(GameUtil.BassPanel);egret.registerClass(GameStartScene,"GameStartScene");var AdaptGamelayer=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.initlayer=function(t){this.maxheight=t},p.putItme=function(t){this.addChild(t)},p.adpat=function(){var t=1;this.$getHeight()>this.maxheight&&(t=this.maxheight/this.$getHeight(),this.scaleX=this.scaleY=t);var e=(this.mStageW-this.$getWidth()*t)/2;this.x=e},e._i=function(){return null==this.inst&&(this.inst=new e),this.inst},e}(GameUtil.BassPanel);egret.registerClass(AdaptGamelayer,"AdaptGamelayer");var GameUtil;!function(t){var e=function(t){function e(e,i,n){t.call(this),this.init(e,i,n)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.init=function(t,e,i){this.texture=t,this.$setX(e),this.$setY(i),this.setanchorOff(.5,.5)},p.setNewTexture=function(t){this.texture=t},p.setanchorOff=function(t,e){this.anchorOffsetX=this.$getWidth()*t,this.anchorOffsetY=this.$getHeight()*e},e}(egret.Bitmap);t.MyBitmap=e,egret.registerClass(e,"GameUtil.MyBitmap")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(t){function e(e,i,n,s,a){t.call(this,RES.getRes(e+"1"),s,a),this.currentNumber=1,this.countNumber=0,this.bLoopCount=0,this.endcallfun=null,this.thisObj=null,this.textureName=e,this.totalNumber=i,this.frameRate=n}__extends(e,t);var i=(__define,e);return p=i.prototype,p.setLoop=function(t){0==t&&(t=1),this.bLoopCount=t-1},p.play=function(){this.intervaltag=egret.setInterval(this.run,this,this.frameRate)},p.run=function(){this.nextFrame()},p.stop=function(){egret.clearInterval(this.intervaltag)},p.nextFrame=function(){if(this.currentNumber++,this.currentNumber>=this.totalNumber){if(this.currentNumber=1,0==this.bLoopCount)return this.stop(),null!=this.endcallfun&&this.endcallfun.apply(this.thisObj),void this.parent.removeChild(this);this.bLoopCount>0&&this.bLoopCount--}this.setNewTexture(RES.getRes(this.textureName+this.currentNumber))},p.setendcall=function(t,e){this.thisObj=e,this.endcallfun=t},e}(t.MyBitmap);t.Animation=e,egret.registerClass(e,"GameUtil.Animation")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(t){function e(e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),t.call(this),this.imgUrl=e,this.imgwidth=i,this.imgheight=n,this.init()}__extends(e,t);var i=(__define,e);return p=i.prototype,p.init=function(){RES.getResByUrl(this.imgUrl,this.comp,this,RES.ResourceItem.TYPE_IMAGE)},p.comp=function(t){this.imag=new egret.Bitmap,this.imag.texture=t,this.addChild(this.imag),0!=this.imgwidth&&(this.imag.width=this.imgwidth),0!=this.imgheight&&(this.imag.height=this.imgheight),this.imag.anchorOffsetX=this.imgwidth/2,this.imag.anchorOffsetY=this.imgheight/2},p.getimg=function(){return this.imag},e}(egret.DisplayObjectContainer);t.GetImageByUrl=e,egret.registerClass(e,"GameUtil.GetImageByUrl")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(t){function e(e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),t.call(this),this.imgUrl=e,this.imgwidth=i,this.imgheight=n,this.init()}__extends(e,t);var i=(__define,e);return p=i.prototype,p.init=function(){RES.getResAsync(this.imgUrl,this.comp,this)},p.comp=function(t){this.imag=new egret.Bitmap,this.imag.texture=t,this.addChild(this.imag),0!=this.imgwidth&&(this.imag.width=this.imgwidth),0!=this.imgheight&&(this.imag.height=this.imgheight),this.imag.anchorOffsetX=this.imgwidth/2,this.imag.anchorOffsetY=this.imgheight/2},e}(egret.DisplayObjectContainer);t.GetResByany=e,egret.registerClass(e,"GameUtil.GetResByany")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(){function e(t,e){void 0===t&&(t=egret.URLRequestMethod.POST),void 0===e&&(e=egret.URLLoaderDataFormat.TEXT),this.init(t,e)}var i=(__define,e);return p=i.prototype,p.init=function(t,e){void 0===t&&(t=egret.URLRequestMethod.POST),void 0===e&&(e=egret.URLLoaderDataFormat.TEXT),this.urlLoader=new egret.URLLoader,this.urlLoader.dataFormat=e,this.urlLoader.addEventListener(egret.Event.COMPLETE,this.loaded,this),this.urlRequest=new egret.URLRequest,this.urlRequest.method=t},p.loaded=function(t){this.urlLoader.removeEventListener(egret.Event.COMPLETE,this.loaded,this),this.thisObj.removeChild(this.coverBg);var e=JSON.parse(this.urlLoader.data);null!=this.onLoader&&this.onLoader.apply(this.thisObj,[e])},p.send=function(e,i,n,s,a){void 0===n&&(n=null),void 0===s&&(s=null),void 0===a&&(a=t.GameConfig.IP),this.urlRequest.url="Http://"+a+i,this.onLoader=n,this.thisObj=s;var r=new egret.URLVariables(t.objectToString(e));this.urlRequest.data=r,this.urlLoader.addEventListener(egret.Event.COMPLETE,this.loaded,this),this.urlLoader.load(this.urlRequest),this.coverBg=t.createRect(0,0,window.screen.availWidth,window.screen.availHeight,0),this.thisObj.addChild(this.coverBg),this.coverBg.touchEnabled=!0},p.setReqMethod=function(t){this.urlRequest.method=t},e.getinstance=function(t,i){return void 0===t&&(t=egret.URLRequestMethod.POST),void 0===i&&(i=egret.URLLoaderDataFormat.TEXT),null==e._instance&&(e._instance=new e(t,i)),e._instance},e}();t.Http=e,egret.registerClass(e,"GameUtil.Http")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(t){function e(e,i,n,s,a){void 0===s&&(s=.5),void 0===a&&(a=.5),t.call(this),this.init(e,i,n,s,a)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.init=function(t,e,i,n,s){this.textColor=0,this.fontFamily="楷体",this.$setX(t),this.$setY(e),this.$setSize(i),this.anchorX=n,this.anchorY=s},p.setText=function(t){this.text=t,this.setanchorOff(this.anchorX,this.anchorY)},p.setSize=function(t){this.size=t,this.setanchorOff(this.anchorX,this.anchorY)},p.setanchorOff=function(t,e){this.anchorOffsetX=this.$getWidth()*t,this.anchorOffsetY=this.$getHeight()*e},e}(egret.TextField);t.MyTextField=e,egret.registerClass(e,"GameUtil.MyTextField")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(t){function e(e,i,n,s,a,r,h){void 0===r&&(r=.5),void 0===h&&(h=.5),t.call(this,e,i,n,r,h),this.width=s,this.height=n,this.type=egret.TextFieldType.INPUT,this.baseText="",this.addEventListener(egret.FocusEvent.FOCUS_IN,this.onFocusIn,this),this.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onFocusOut,this)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.setBaseText=function(t,e){this.baseText=t,this.baseTextAlpha=e,this.setText(this.baseText),this.alpha=this.baseTextAlpha},p.setBaseTextSize=function(t,e){this.basetextsize=t,this.sourcesize=e,this.text==this.baseText&&(this.setSize(this.basetextsize),this.height=t)},p.onFocusIn=function(t){this.text==this.baseText&&(this.setText(""),this.height=this.sourcesize,this.setSize(this.sourcesize),this.alpha=1)},p.onFocusOut=function(t){""==this.text&&(this.setText(this.baseText),this.alpha=this.baseTextAlpha,this.height=this.basetextsize,this.setSize(this.basetextsize))},e}(t.MyTextField);t.InputTextFiled=e,egret.registerClass(e,"GameUtil.InputTextFiled")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(){function t(t,e){this.loadedfun=t,this.thisObj=e,this.loadingRes()}var e=(__define,t);return p=e.prototype,p.loadingRes=function(){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},p.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("preloading")},p.onResourceLoadComplete=function(t){"preloading"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.loadedfun.apply(this.thisObj))},p.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},p.onResourceProgress=function(t){"preloading"==t.groupName},t}();t.LoadingLogopre=e,egret.registerClass(e,"GameUtil.LoadingLogopre")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(e){function i(t,i,n,s,a,r){void 0===n&&(n=0),void 0===s&&(s=0),void 0===a&&(a=!1),void 0===r&&(r=4),this.loadedfun=t,this.thisObj=i,this.IsGif=a,this.gifTotalcount=r,this.loadingbarOffX=n,this.loadingbarOffY=s,e.call(this)}__extends(i,e);var n=(__define,i);return p=n.prototype,p.init=function(){new t.LoadingLogopre(this.onComplete,this)},p.onComplete=function(e){if(this.IsGif)this.gifruncount=0,this.loadingbar=new t.MyBitmap(RES.getRes("loadinggif0_png"),this.mStageW/2+this.loadingbarOffX,this.mStageH/2+this.loadingbarOffY),this.addChild(this.loadingbar),egret.setInterval(this.rungif,this,150);else{this.loadingbar=new t.MyBitmap(RES.getRes("loadingbar_png"),this.loadingbarOffX,this.mStageH/2+this.loadingbarOffY),this.loadingbar.x=(this.mStageW-this.loadingbar.texture.textureWidth)/2,this.loadingbar.anchorOffsetX=0;var i=this.loadingbar.texture.textureWidth-8,n=this.loadingbar.texture.textureHeight-8,s=new egret.Rectangle(4,4,i,n);this.loadingbar.scale9Grid=s,this.addChild(this.loadingbar),this.loadingbar.width=10}this.loadingRes()},p.rungif=function(){this.gifruncount++,this.gifruncount>=this.gifTotalcount&&(this.gifruncount=0),this.loadingbar.setNewTexture(RES.getRes("loadinggif"+this.gifruncount+"_png"))},p.loadingRes=function(){this.loadingView=new LoadingUI,this.loadingView.x=this.mStageW/2,this.loadingView.y=this.mStageH/2+this.loadingbarOffY+30,this.addChild(this.loadingView),this.loadingView.anchorOffsetX=this.loadingView.width/2,RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},p.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("preload")},p.onResourceLoadComplete=function(t){"preload"==t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.loadedfun.apply(this.thisObj))},p.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},p.onResourceProgress=function(t){"preload"==t.groupName&&(this.IsGif||this.setPro(t.itemsLoaded/t.itemsTotal),this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal))},p.setPro=function(t){this.loadingbar.width=this.loadingbar.texture.textureWidth*t},p.getPro=function(){return this.loadingbar.width/this.loadingbar.texture.textureWidth},i}(t.BassPanel);t.LoadingPanel=e,egret.registerClass(e,"GameUtil.LoadingPanel")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(e){function i(t,i,n,s,a){void 0===s&&(s=null),void 0===a&&(a=null),e.call(this),this.menuNormalTexture=null,this.menuSelectTexture=null,this.bScaleMode=!1,this.mScale=.9,this.isActive=!1,this.thisObj=t,this.param=a,this.init(i,n,s)}__extends(i,e);var n=(__define,i);return p=n.prototype,p.init=function(e,i,n){void 0===n&&(n=null),this.menuNormalTexture=RES.getRes(e),this.menuSelectTexture=RES.getRes(i),this.backFun=n,this.btnImg=new t.MyBitmap(this.menuNormalTexture,0,0),this.addChild(this.btnImg),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.TouchBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.TouchMove,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.TouchEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.TouchCancel,this)},p.setBackFun=function(t){this.backFun=t},p.setScaleMode=function(t){void 0===t&&(t=.9),this.bScaleMode=!0,this.mScale=t},p.setButtonTexture=function(t,e){this.menuNormalTexture=RES.getRes(t),this.menuSelectTexture=RES.getRes(e),this.btnImg.setNewTexture(this.menuNormalTexture)},p.addButtonImg=function(e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this.addImg=new t.MyBitmap(RES.getRes(e),i,n),this.addChild(this.addImg)},p.setAddImgTexture=function(t){this.addImg.setNewTexture(RES.getRes(t))},p.addButtonText=function(e,i,n,s){void 0===n&&(n=0),void 0===s&&(s=0),null!=this.btnImg.texture?this.mTextField=new t.MyTextField(n,s,i):this.mTextField=new t.MyTextField(n,s,i),this.mTextField.setText(e),this.addChild(this.mTextField)},p.getBtnText=function(){return this.mTextField},p.setBtnScale=function(t,e){this.btnImg.scaleX=t,this.btnImg.scaleY=e},p.TouchBegin=function(t){this.btnImg.setNewTexture(this.menuSelectTexture),this.bScaleMode&&(this.scaleX=this.scaleY=this.mScale),this.isActive=!0},p.TouchMove=function(t){},p.TouchEnd=function(t){this.btnImg.setNewTexture(this.menuNormalTexture),this.bScaleMode&&(this.scaleX=this.scaleY=1),this.isActive&&this.backFun.apply(this.thisObj,this.param),this.isActive=!1},p.TouchCancel=function(t){this.btnImg.setNewTexture(this.menuNormalTexture),this.bScaleMode&&(this.scaleX=this.scaleY=1),this.isActive=!1},i}(egret.DisplayObjectContainer);t.Menu=e,egret.registerClass(e,"GameUtil.Menu")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(e){function i(t,i,n,s,a,r){void 0===a&&(a=0),void 0===r&&(r=.5),e.call(this),this.mPercent=100,this.init(t,i,n,s,a,r)}__extends(i,e);var n=(__define,i);return p=n.prototype,p.init=function(e,i,n,s,a,r){this.progressbar=new t.MyBitmap(RES.getRes(e),i,n),this.addChild(this.progressbar),this.progressbar.scale9Grid=s,this.progressbar.setanchorOff(a,r)},p.setbarX=function(t){this.progressbar.x=t},p.setbarY=function(t){this.progressbar.y=t},p.setPercent=function(t){0>t||(this.mPercent=t,this.updateWidth())},p.getPercent=function(){return this.mPercent},p.updateWidth=function(){this.progressbar.width=this.progressbar.texture.textureWidth*this.mPercent},i}(egret.DisplayObjectContainer);t.ProgressBar=e,egret.registerClass(e,"GameUtil.ProgressBar")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(e){function i(t,i){e.call(this),this.item=[],this.curseltTag=0,this.itemCount=-1,this.normalTexture=t,this.selectTexture=i,this.init()}__extends(i,e);var n=(__define,i);return p=n.prototype,p.init=function(){},p.addItem=function(e,i,n){this.itemCount++;var s=new egret.DisplayObjectContainer,a=new t.Menu(this,this.normalTexture,this.normalTexture,this.chooseButton,[this.itemCount]);a.x=i,a.y=n,s.addChild(a),e.x=i+a.width/2+e.width/2,e.y=n,s.addChild(e),this.item.push(a),this.addChild(s),0==this.itemCount&&a.setButtonTexture(this.selectTexture,this.selectTexture)},p.chooseButton=function(t){if(t!=this.curseltTag){var e=this.item[t];e.setButtonTexture(this.selectTexture,this.selectTexture);var i=this.item[this.curseltTag];i.setButtonTexture(this.normalTexture,this.normalTexture),this.curseltTag=t}},p.getCurSelectTag=function(){return this.curseltTag},i}(egret.DisplayObjectContainer);t.RadioButton=e,egret.registerClass(e,"GameUtil.RadioButton")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(t){function e(e,i,n){void 0===n&&(n=.5),t.call(this),this.scrollview=new egret.ScrollView,this.content=new egret.DisplayObjectContainer,this.addChild(this.scrollview),this.scrollview.width=e,this.scrollview.height=i,this.scrollview.scrollSpeed=n,this.init()}__extends(e,t);var i=(__define,e);return p=i.prototype,p.init=function(){this.scrollview.setContent(this.content)},p.putItem=function(t){this.content.addChild(t)},p.clearItem=function(){this.content.removeChildren()},p.getScorllTop=function(){return this.scrollview.scrollTop},p.setScorllTop=function(t){this.scrollview.scrollTop=t},e}(egret.DisplayObjectContainer);t.ScrollView=e,egret.registerClass(e,"GameUtil.ScrollView")}(GameUtil||(GameUtil={}));var SharePage=function(t){function e(){t.call(this),this.desctext="盛讯小游戏--封神名册"}__extends(e,t);var i=(__define,e);return p=i.prototype,p.getSignPackage=function(){var t=encodeURIComponent(window.location.href.split("#")[0]),e={url:t};GameUtil.Http.getinstance().send(e,"/weixinshare/share",this.share,this)},p.share=function(t){console.log("data======",t),wx.config({debug:!1,appId:t.appId,timestamp:Number(t.timestamp),nonceStr:t.noncestr,signature:t.sign,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo"]}),this.getWeiXinShareTimeline(),this.getWeiXinShareAppMessage()},p.setdesctext=function(t){this.desctext=t,this.getWeiXinShareAppMessage(),this.getWeiXinShareTimeline()},p.getWeiXinShareTimeline=function(){var t=new BodyMenuShareTimeline;t.title=this.desctext,t.link="http://sjlrecard.h5.gamexun.com/",t.imgUrl="http://sjlrecard.h5.gamexun.com/shareicon.png",t.trigger=function(){},t.success=function(){},t.cancel=function(){},t.fail=function(t){},wx.onMenuShareTimeline(t)},p.getWeiXinShareAppMessage=function(){var t=new BodyMenuShareAppMessage;t.title="盛讯小游戏--封神名册",t.desc=this.desctext,t.link="http://sjlrecard.h5.gamexun.com/",t.imgUrl="http://sjlrecard.h5.gamexun.com/shareicon.png",t.trigger=function(){},t.success=function(){},t.cancel=function(){},t.fail=function(t){},wx.onMenuShareAppMessage(t)},e._i=function(){return null==this.inst&&(this.inst=new e),this.inst},e}(egret.DisplayObjectContainer);egret.registerClass(SharePage,"SharePage");var GameUtil;!function(t){var e=function(e){function i(t,i,n,s){void 0===n&&(n=!1),void 0===s&&(s=1200),e.call(this),this.textsize=30,this.mStageW=egret.MainContext.instance.stage.stageWidth,this.mStageH=egret.MainContext.instance.stage.stageHeight,this.tipText=i,this.tipImg=t,this.bDisappear=n,this.disSecond=s,this.init()}__extends(i,e);var n=(__define,i);return p=n.prototype,p.init=function(){if(!this.bDisappear){var e=t.createRect(0,0,window.screen.availWidth,window.screen.availHeight,.4);this.addChild(e),this.touchEnabled=!0}if(null==this.tipImg){var i=t.createRect(this.mStageW/2,this.mStageH/2,window.screen.availWidth,100,1,9210760);i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,this.addChild(i)}else this.tipbg=new t.MyBitmap(RES.getRes(this.tipImg),this.mStageW/2,this.mStageH/2),this.addChild(this.tipbg);if(this.showtip(),this.bDisappear){var n=egret.Tween.get(this);n.to({alpha:1},300).to({alpha:0},this.disSecond).call(this.close,this)}else this.showbutton()},p.showtip=function(){this.text=new t.MyTextField(this.mStageW/2,this.mStageH/2,this.textsize),this.text.setText(this.tipText),this.text.textColor=0,this.addChild(this.text)},p.setTextwidth=function(t){this.text.width=t},p.setTextSize=function(t){this.text.setSize(t)},p.setTextHor=function(t,e,i,n){this.text.textAlign=i,this.text.x=this.mStageW/2-this.tipbg.width/2+n},p.setTextlineSpacing=function(t){this.text.lineSpacing=t},p.showbutton=function(){var e=new t.Menu(this,"acceptBtn_png","acceptBtn_png",this.close);e.x=this.mStageW/2,e.y=this.mStageH/2+this.tipbg.texture.textureHeight/2,this.addChild(e),e.setScaleMode()},p.close=function(){this.parent.removeChild(this)},i}(egret.DisplayObjectContainer);t.TipsPanel=e,egret.registerClass(e,"GameUtil.TipsPanel")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){var e=function(e){function i(t){void 0===t&&(t=0),e.call(this),this.init(t)}__extends(i,e);var n=(__define,i);return p=n.prototype,p.init=function(e){this.coverBg=t.createRect(0,0,640,1136,0),this.addChild(this.coverBg),this.touchEnabled=!0},p.setAlpha=function(t){this.coverBg.alpha=t},i.getInstace=function(){return null==this._instance&&(this._instance=new t.WaitServerPanel(0)),this._instance},i}(egret.DisplayObjectContainer);t.WaitServerPanel=e,egret.registerClass(e,"GameUtil.WaitServerPanel")}(GameUtil||(GameUtil={}));var GameUtil;!function(t){function e(t,e,i,n,s,a){void 0===s&&(s=1),void 0===a&&(a=0);var r=new egret.Shape;return r.x=t,r.y=e,r.graphics.beginFill(a,s),r.graphics.drawRect(0,0,i,n),r.graphics.endFill(),r}function i(t,e,i,n,s){void 0===n&&(n=1),void 0===s&&(s=0);var a=new egret.Shape;return a.x=t,a.y=e,a.graphics.beginFill(s,n),a.graphics.drawCircle(0,0,i),a.graphics.endFill(),a}function n(t){var e="";for(var i in t){var n=i+"="+t[i];e+=n+"&"}return e=e.substr(0,e.length-1)}function s(t){return/^[\u4e00-\u9fa5]+$/.test(t)}function a(t){return t=t.replace(/^/,"")}function r(t){return t=t.toUpperCase(),/^0\d{2,3}-?\d{7,11}$|^1\d{10}$/.test(t)}function h(t,e,i,n,s,a){var r=new egret.TextField;r.x=e,r.y=i,r.size=n,r.textAlign="center",r.textColor=a,r.text=s,t.addChild(r),r.anchorOffsetX=.5*r.width,r.anchorOffsetY=.5*r.height,egret.Tween.get(r).to({y:i-40},700),egret.Tween.get(r).to({alpha:0},700).call(function(){t.removeChild(r)},t)}function o(t,e){egret.localStorage.setItem(t,e)}function c(t){egret.localStorage.getItem(t)}function l(t){null!=t?egret.localStorage.removeItem(t):egret.localStorage.clear()}function d(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(e);return null!=i?decodeURI(i[2]):null}function u(e){return e>=t.GameConfig.DesignHeight/2?g._i().getSH()-(t.GameConfig.DesignHeight-e):e}var g=function(){function e(){this.stagetY=0}var i=(__define,e);return p=i.prototype,e._i=function(){return null==this._instance&&(this._instance=new t.GameConfig),this._instance},p.setStageHeight=function(t){this.stagetY=t},p.getSH=function(){return this.stagetY},e.IP="spring.gamexun.com",e.bRunFPS=!1,e.NullAction=0,e.CrossLeft=1,e.TransAlpha=2,e.OpenDoor=3,e.DesignWidth=750,e.DesignHeight=1334,e._instance=null,e}();t.GameConfig=g,egret.registerClass(g,"GameUtil.GameConfig"),t.createRect=e,t.createCircle=i,t.objectToString=n,t.isChineseName=s,t.removeimag=a,t.isPhoneNum=r,t.numberUpDisp=h,t.saveLocalData=o,t.readLocalData=c,t.clearLocalData=l,t.getQueryString=d,t.setscreenY=u}(GameUtil||(GameUtil={}));var LoadingUI=function(t){function e(){t.call(this),this.createView()}__extends(e,t);var i=(__define,e);return p=i.prototype,p.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"
},p.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var GameState;!function(t){t[t.gaming=0]="gaming",t[t.gamepause=1]="gamepause",t[t.gameover=2]="gameover"}(GameState||(GameState={}));var Main=function(t){function e(){t.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.onAddToStage=function(t){window.screen.availHeight<window.screen.availWidth&&(this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL),GameUtil.GameScene.init(this.stage),GameUtil.GameScene.runscene(new GameUtil.LoadingPanel(this.createGameScene,this,0,0))},p.createGameScene=function(){GameUtil.Http.getinstance(),GameUtil.GameConfig._i().setStageHeight(this.stage.stageHeight),GameUtil.GameConfig._i().bfirstplay=!0,GameUtil.GameScene.runscene(new GameStartScene)},e}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var TimePanel=function(t){function e(){t.call(this)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.init=function(){this.show()},p.show=function(){this.bchanger=!1,this.bchangey=!1;var t=new GameUtil.MyBitmap(RES.getRes("Timepic_png"),60,GameUtil.setscreenY(1265));this.addChild(t),this.timebar=new GameUtil.MyBitmap(RES.getRes("timepro_png"),120,GameUtil.setscreenY(1268)),this.timebar.setanchorOff(0,.5),this.addChild(this.timebar),this.intervaltag=egret.setInterval(this.timerun,this,300)},p.cutTimesc=function(){var t=this.timebar.$getScaleX();t-=.01,this.timebar.$setScaleX(t)},p.timerun=function(){if(GameScence._i().gamestate!=GameState.gamepause){GameScence._i().costime+=300;var t=this.timebar.$getScaleX();t-=.01,this.timebar.$setScaleX(t),!this.bchanger&&.15>=t&&(this.bchanger=!0,this.timebar.setNewTexture(RES.getRes("redtimepro_png"))),.4>=t&&!this.bchangey&&(this.bchangey=!0,this.timebar.setNewTexture(RES.getRes("yelltimepro_png"))),0>=t&&(this.timebar.$setScaleX(0),console.log("gameover"),GameScence._i().gameOver(),egret.clearInterval(this.intervaltag))}},p.reset=function(){this.timebar.$setScaleX(1)},e._i=function(){return null==this.inst&&(this.inst=new e),this.inst},e}(GameUtil.BassPanel);egret.registerClass(TimePanel,"TimePanel");var cardsprite=function(t){function e(e,i,n,s,a){t.call(this,e,i,n),this.turntime=100,this.initcard(s,a)}__extends(e,t);var i=(__define,e);return p=i.prototype,p.initcard=function(t,e){this.cardID=t,this.currdid=e,this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.recard,this)},p.recard=function(t){if(!GameScence._i().recarding){GameScence._i().recarding=!0,this.touchEnabled=!1;var e=this,i="card"+this.currdid+"_png";egret.Tween.get(this).to({scaleX:0},e.turntime).call(function(){e.setNewTexture(RES.getRes(i))}).to({scaleX:1},e.turntime).call(e.finishrecard,e)}},p.returnrecard=function(){var t=this,e="cardback_png";egret.Tween.get(this).to({scaleX:0},t.turntime).call(function(){t.setNewTexture(RES.getRes(e))}).to({scaleX:1},t.turntime).call(function(){t.touchEnabled=!0,GameScence._i().recarding=!1})},p.finishrecard=function(){var t=GameScence._i().getrecardnum();if(0==t)GameScence._i().setrecardnum(1),GameScence._i().setcurrecard(this),GameScence._i().recarding=!1;else{if(this.cardID==GameScence._i().getcurrecard().cardID){GameScence._i().recarding=!1;var e=GameScence._i().getrecardcount();e++,GameScence._i().setrecardcount(e),e==GameScence.TotalCard&&(egret.clearInterval(TimePanel._i().intervaltag),GameScence._i().successGame())}else{var i=this,n=GameScence._i().getcurrecard();egret.setTimeout(function(){i.returnrecard(),n.returnrecard()},this,300)}GameScence._i().setrecardnum(0),GameScence._i().setcurrecard(null)}},e}(GameUtil.MyBitmap);egret.registerClass(cardsprite,"cardsprite");